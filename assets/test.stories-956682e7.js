import{b as I,x as j,y as E}from"./lit-html-bb3a9a44.js";import{i as N,t as A,e as T,d as B,a as $,b as M,w as W,c as w}from"./directive-9aa0afd6.js";import{e as z}from"./directive-helpers-1eedd99a.js";import"./_commonjsHelpers-87174ba5.js";import"./index-356e4a49.js";import"./uniq-9b43ae33.js";import"./_getTag-7a3ef05e.js";import"./index-92073c91.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c=(n,t)=>{var i,e;const s=n._$AN;if(s===void 0)return!1;for(const o of s)(e=(i=o)._$AO)===null||e===void 0||e.call(i,t,!1),c(o,t);return!0},v=n=>{let t,i;do{if((t=n._$AM)===void 0)break;i=t._$AN,i.delete(n),n=t}while((i==null?void 0:i.size)===0)},H=n=>{for(let t;t=n._$AM;n=t){let i=t._$AN;if(i===void 0)t._$AN=i=new Set;else if(i.has(n))break;i.add(n),R(t)}};function L(n){this._$AN!==void 0?(v(this),this._$AM=n,H(this)):this._$AM=n}function U(n,t=!1,i=0){const e=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(t)if(Array.isArray(e))for(let o=i;o<e.length;o++)c(e[o],!1),v(e[o]);else e!=null&&(c(e,!1),v(e));else c(this,n)}const R=n=>{var t,i,e,s;n.type==A.CHILD&&((t=(e=n)._$AP)!==null&&t!==void 0||(e._$AP=U),(i=(s=n)._$AQ)!==null&&i!==void 0||(s._$AQ=L))};class K extends N{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,i,e){super._$AT(t,i,e),H(this),this.isConnected=t._$AU}_$AO(t,i=!0){var e,s;t!==this.isConnected&&(this.isConnected=t,t?(e=this.reconnected)===null||e===void 0||e.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),i&&(c(this,t),v(this))}setValue(t){if(z(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}const D=new WeakMap;class Q{constructor(t,i){this.startPaused=!1,this.disabled=!1,this.clients=new Set,this.pendingComplete=!1,this.host=t,this.defaultOptions=i.defaultOptions||{},this.startPaused=!!i.startPaused,this.disabled=!!i.disabled,this.onComplete=i.onComplete,D.set(this.host,this)}async add(t){var i,e;this.clients.add(t),this.startPaused&&((i=t.webAnimation)===null||i===void 0||i.pause()),this.pendingComplete=!0,await t.finished,this.pendingComplete&&!this.isAnimating&&(this.pendingComplete=!1,(e=this.onComplete)===null||e===void 0||e.call(this))}remove(t){this.clients.delete(t)}pause(){this.clients.forEach(t=>{var i;return(i=t.webAnimation)===null||i===void 0?void 0:i.pause()})}play(){this.clients.forEach(t=>{var i;return(i=t.webAnimation)===null||i===void 0?void 0:i.play()})}cancel(){this.clients.forEach(t=>{var i;return(i=t.webAnimation)===null||i===void 0?void 0:i.cancel()}),this.clients.clear()}finish(){this.clients.forEach(t=>{var i;return(i=t.webAnimation)===null||i===void 0?void 0:i.finish()}),this.clients.clear()}togglePlay(){this.isPlaying?this.pause():this.play()}get isAnimating(){return this.clients.size>0}get isPlaying(){return Array.from(this.clients).some(t=>{var i;return((i=t.webAnimation)===null||i===void 0?void 0:i.playState)==="running"})}async finished(){await Promise.all(Array.from(this.clients).map(t=>t.finished))}}let _=0;const y=new Map,C=new WeakSet,k=()=>new Promise(n=>requestAnimationFrame(n)),O=(n,t)=>{const i=n-t;return i===0?void 0:i},P=(n,t)=>{const i=n/t;return i===1?void 0:i},b={left:(n,t)=>{const i=O(n,t);return{value:i,transform:i&&`translateX(${i}px)`}},top:(n,t)=>{const i=O(n,t);return{value:i,transform:i&&`translateY(${i}px)`}},width:(n,t)=>{const i=P(n,t);return{value:i,transform:i&&`scaleX(${i})`}},height:(n,t)=>{const i=P(n,t);return{value:i,transform:i&&`scaleY(${i})`}}},X={duration:333,easing:"ease-in-out"},Y=["left","top","width","height","opacity","color","background"],x=new WeakMap;class q extends K{constructor(t){if(super(t),this.t=null,this.i=null,this.o=!0,this.shouldLog=!1,t.type===A.CHILD)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){var t;(t=this.resolveFinished)===null||t===void 0||t.call(this),this.finished=new Promise(i=>{this.h=i})}async resolveFinished(){var t;(t=this.h)===null||t===void 0||t.call(this),this.h=void 0}render(t){return I}getController(){return D.get(this.l)}isDisabled(){var t;return this.options.disabled||((t=this.getController())===null||t===void 0?void 0:t.disabled)}update(t,[i]){var e;const s=this.l===void 0;return s&&(this.l=(e=t.options)===null||e===void 0?void 0:e.host,this.l.addController(this),this.element=t.element,x.set(this.element,this)),this.optionsOrCallback=i,(s||typeof i!="function")&&this.u(i),this.render(i)}u(t){var i,e;t=t??{};const s=this.getController();s!==void 0&&((t={...s.defaultOptions,...t}).keyframeOptions={...s.defaultOptions.keyframeOptions,...t.keyframeOptions}),(i=(e=t).properties)!==null&&i!==void 0||(e.properties=Y),this.options=t}v(){const t={},i=this.element.getBoundingClientRect(),e=getComputedStyle(this.element);return this.options.properties.forEach(s=>{var o;const r=(o=i[s])!==null&&o!==void 0?o:b[s]?void 0:e[s],l=Number(r);t[s]=isNaN(l)?r+"":l}),t}p(){let t,i=!0;return this.options.guard&&(t=this.options.guard(),i=((e,s)=>{if(Array.isArray(e)){if(Array.isArray(s)&&s.length===e.length&&e.every((o,r)=>o===s[r]))return!1}else if(s===e)return!1;return!0})(t,this.m)),this.o=this.l.hasUpdated&&!this.isDisabled()&&!this.isAnimating()&&i&&this.element.isConnected,this.o&&(this.m=Array.isArray(t)?Array.from(t):t),this.o}hostUpdate(){var t;typeof this.optionsOrCallback=="function"&&this.u(this.optionsOrCallback()),this.p()&&(this.g=this.v(),this.t=(t=this.t)!==null&&t!==void 0?t:this.element.parentNode,this.i=this.element.nextSibling)}async hostUpdated(){if(!this.o||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await k;const i=this._(),e=this.A(this.options.keyframeOptions,i),s=this.v();if(this.g!==void 0){const{from:o,to:r}=this.O(this.g,s,i);this.log("measured",[this.g,s,o,r]),t=this.calculateKeyframes(o,r)}else{const o=y.get(this.options.inId);if(o){y.delete(this.options.inId);const{from:r,to:l}=this.O(o,s,i);t=this.calculateKeyframes(r,l),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,_++,t.forEach(m=>m.zIndex=_)}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,e)}resetStyles(){var t;this.P!==void 0&&(this.element.setAttribute("style",(t=this.P)!==null&&t!==void 0?t:""),this.P=void 0)}commitStyles(){var t,i;this.P=this.element.getAttribute("style"),(t=this.webAnimation)===null||t===void 0||t.commitStyles(),(i=this.webAnimation)===null||i===void 0||i.cancel()}reconnected(){}async disconnected(){var t;if(!this.o||(this.options.id!==void 0&&y.set(this.options.id,this.g),this.options.out===void 0))return;if(this.prepare(),await k(),(t=this.t)===null||t===void 0?void 0:t.isConnected){const e=this.i&&this.i.parentNode===this.t?this.i:null;if(this.t.insertBefore(this.element,e),this.options.stabilizeOut){const s=this.v();this.log("stabilizing out");const o=this.g.left-s.left,r=this.g.top-s.top;getComputedStyle(this.element).position!=="static"||o===0&&r===0||(this.element.style.position="relative"),o!==0&&(this.element.style.left=o+"px"),r!==0&&(this.element.style.top=r+"px")}}const i=this.A(this.options.keyframeOptions);await this.animate(this.options.out,i),this.element.remove()}prepare(){this.createFinished()}start(){var t,i;(i=(t=this.options).onStart)===null||i===void 0||i.call(t,this)}didFinish(t){var i,e;t&&((e=(i=this.options).onComplete)===null||e===void 0||e.call(i,this)),this.g=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}_(){const t=[];for(let i=this.element.parentNode;i;i=i==null?void 0:i.parentNode){const e=x.get(i);e&&!e.isDisabled()&&e&&t.push(e)}return t}get isHostRendered(){const t=C.has(this.l);return t||this.l.updateComplete.then(()=>{C.add(this.l)}),t}A(t,i=this._()){const e={...X};return i.forEach(s=>Object.assign(e,s.options.keyframeOptions)),Object.assign(e,t),e}O(t,i,e){t={...t},i={...i};const s=e.map(l=>l.animatingProperties).filter(l=>l!==void 0);let o=1,r=1;return s!==void 0&&(s.forEach(l=>{l.width&&(o/=l.width),l.height&&(r/=l.height)}),t.left!==void 0&&i.left!==void 0&&(t.left=o*t.left,i.left=o*i.left),t.top!==void 0&&i.top!==void 0&&(t.top=r*t.top,i.top=r*i.top)),{from:t,to:i}}calculateKeyframes(t,i,e=!1){var s;const o={},r={};let l=!1;const m={};for(const a in i){const h=t[a],d=i[a];if(a in b){const F=b[a];if(h===void 0||d===void 0)continue;const g=F(h,d);g.transform!==void 0&&(m[a]=g.value,l=!0,o.transform=`${(s=o.transform)!==null&&s!==void 0?s:""} ${g.transform}`)}else h!==d&&h!==void 0&&d!==void 0&&(l=!0,o[a]=h,r[a]=d)}return o.transformOrigin=r.transformOrigin=e?"center center":"top left",this.animatingProperties=m,l?[o,r]:void 0}async animate(t,i=this.options.keyframeOptions){this.start(),this.frames=t;let e=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),t!==void 0)){this.log("animate",[t,i]),e=!0,this.webAnimation=this.element.animate(t,i);const s=this.getController();s==null||s.add(this);try{await this.webAnimation.finished}catch{}s==null||s.remove(this)}return this.didFinish(e),e}isAnimating(){var t,i;return((t=this.webAnimation)===null||t===void 0?void 0:t.playState)==="running"||((i=this.webAnimation)===null||i===void 0?void 0:i.pending)}log(t,i){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,i)}}const V=T(q);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const G=T(class extends N{constructor(n){var t;if(super(n),n.type!==A.ATTRIBUTE||n.name!=="class"||((t=n.strings)===null||t===void 0?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(n){return" "+Object.keys(n).filter(t=>n[t]).join(" ")+" "}update(n,[t]){var i,e;if(this.nt===void 0){this.nt=new Set,n.strings!==void 0&&(this.st=new Set(n.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in t)t[o]&&!(!((i=this.st)===null||i===void 0)&&i.has(o))&&this.nt.add(o);return this.render(t)}const s=n.element.classList;this.nt.forEach(o=>{o in t||(s.remove(o),this.nt.delete(o))});for(const o in t){const r=!!t[o];r===this.nt.has(o)||!((e=this.st)===null||e===void 0)&&e.has(o)||(r?(s.add(o),this.nt.add(o)):(s.remove(o),this.nt.delete(o)))}return j}}),J=`p{--tw-bg-opacity: 1;background-color:rgb(254 202 202 / var(--tw-bg-opacity))}p b{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity))}
`;var Z=Object.defineProperty,tt=Object.getOwnPropertyDescriptor,f=(n,t,i,e)=>{for(var s=e>1?void 0:e?tt(t,i):t,o=n.length-1,r;o>=0;o--)(r=n[o])&&(s=(e?r(t,i,s):r(s))||s);return e&&s&&Z(t,i,s),s};let p=class extends B(J){constructor(){super(...arguments),this.name="World",this.clicked=!1,this.disabled=!1,this.duration=1e3,this.controller=new Q(this,{defaultOptions:{keyframeOptions:{duration:this.duration,fill:"backwards"}}})}_onClick(){this.disabled||(this.clicked=!0,setTimeout(()=>{this.clicked=!1},2e3))}render(){const n={"text-yellow-200":!this.disabled,"p-2":!0,"rounded-full":!0,"text-2xl":!0,"bg-blue-800":this.clicked&&!this.disabled,"bg-blue-200":!this.clicked&&!this.disabled};return E`
      <p>
        Hello,
        <b>${this.name}</b>
        !
      </p>
      <button
        ?disabled=${this.disabled}
        data-testid="button"
        @click=${this._onClick}
        class="hover:text-yellow-700 ${G(n)}"
        ${V()}
      >
        Hello world! 2
      </button>
    `}};f([$()],p.prototype,"name",2);f([$()],p.prototype,"clicked",2);f([$({type:Boolean})],p.prototype,"disabled",2);p=f([M("lukso-test")],p);const ht={title:"Test",component:"lukso-test"};function u({disabled:n}){return E`<lukso-test ?disabled=${n}>Hello World</lukso-test>`}u.args={disabled:!1};u.play=async({canvasElement:n})=>{const t=W(n);await w(t.getByText("Hello World")).toBeInTheDocument(),await w(t.getByText("Hello World")).toBeInTheDocument()};var S;u.parameters={...u.parameters,storySource:{source:`function Primary({
  disabled
}) {
  return html\`<lukso-test ?disabled=\${disabled}>Hello World</lukso-test>\`;
}`,...(S=u.parameters)==null?void 0:S.storySource}};const dt=["Primary"];export{u as Primary,dt as __namedExportsOrder,ht as default};
//# sourceMappingURL=test.stories-956682e7.js.map
